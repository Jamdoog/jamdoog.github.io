<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="pfSense Routing with SR-IOV and Proxmox" /><meta property="og:locale" content="en" /><meta name="description" content="Setting up SR-IOV and using VF’s on a Proxmox Host" /><meta property="og:description" content="Setting up SR-IOV and using VF’s on a Proxmox Host" /><link rel="canonical" href="https://jamdoog.github.io/posts/pfsense-sriov/" /><meta property="og:url" content="https://jamdoog.github.io/posts/pfsense-sriov/" /><meta property="og:site_name" content="James Ledger Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-04T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="pfSense Routing with SR-IOV and Proxmox" /><meta name="twitter:site" content="@Jamdoog" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-07-04T00:00:00+01:00","datePublished":"2021-07-04T00:00:00+01:00","description":"Setting up SR-IOV and using VF’s on a Proxmox Host","headline":"pfSense Routing with SR-IOV and Proxmox","mainEntityOfPage":{"@type":"WebPage","@id":"https://jamdoog.github.io/posts/pfsense-sriov/"},"url":"https://jamdoog.github.io/posts/pfsense-sriov/"}</script><title>pfSense Routing with SR-IOV and Proxmox | James Ledger Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="James Ledger Blog"><meta name="application-name" content="James Ledger Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/13838902?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">James Ledger Blog</a></div><div class="site-subtitle font-italic">NIX, Virtualization & Networking</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Jamdoog" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/Jamdoog" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['blog','jamdoog.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>pfSense Routing with SR-IOV and Proxmox</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>pfSense Routing with SR-IOV and Proxmox</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1625353200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 4, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/Jamdoog">James</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1313 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><h3 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Single Root I/O Virtualization (SR-IOV) is a technology that was developed in order to split up physical PCI devices into multiple separate PCI devices. In a virtualization stack, it allows us to remove the VMM layer of virtualization and address hardware directly. <a href="https://blog.scottlowe.org/2009/12/02/what-is-sr-iov/">Scott’s Weblog explains this in further detail. </a> <img data-src="__GHOST_URL__/content/images/2021/07/single_port_nic.png" alt="" data-proofer-ignore>Source: https://doc.dpdk.org/guides/nics/intel_vf.html One of the most common examples of this technology is present in NIC’s. Intel has put this technology in lots of there equipment, but one of the most common chip-sets for Homelabbers is the <a href="https://ark.intel.com/content/www/us/en/ark/products/84805/intel-ethernet-server-adapter-i350-t4v2.html">i350 chipset</a>. After doing my research online, I came to the conclusion that this was the most appropriate chip-set for pfSense. My specific variant of this chip-set is the T4V2 version. A 4 port gigabit NIC going for about £50 on <a href="https://www.ebay.co.uk/sch/i.html?_nkw=i350-t4&amp;_sacat=0">eBay</a>.</p><p>SR-IOV allows me to split up my WAN connection into “Virtual Functions” which reduces the overhead on the Hypervisor due to not having to process traffic through the virtual switch. This means that latency-sensitive applications could benefit greatly alongside more CPU cycles being available to the host.</p><hr /><h2 id="creating-virtual-functions"><span class="mr-2">Creating Virtual Functions</span><a href="#creating-virtual-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I didn’t find much documentation on this available. However, after a couple of bug reports and Proxmox threads I had managed to piece it together. Here are the requirements:</p><ul><li>SR-IOV enabled in the BIOS. I found my NIC has a dedicated section with the amount of VF’s I could define.<li>Intel VT-D / AMD-Vi enabled<li>Access to GRUB’s configuration file<li>Access to module configurations</ul><h3 id="editing-grub"><span class="mr-2">Editing Grub</span><a href="#editing-grub" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>On Proxmox, the path for the grub configuration file can be found at /etc/default/grub. Under the <code class="language-plaintext highlighter-rouge">GRUB_CMDLINE_LINUX_DEFAULT</code> parameters I appended the following:</p><p><code class="language-plaintext highlighter-rouge">amd_iommu=on iommu=pt pci=assign-busses</code> (Replace AMD with Intel for Intel CPU’s)</p><p>These flags will split the PCI devices up into IOMMU groups and assign numbers from the kernel as opposed to the firmware. I found that Virtual Functions could not be created without the assign-busses flag. <a href="https://forum.proxmox.com/threads/enabling-sr-iov-for-intel-nic-x550-t2-on-proxmox-6.56677/">This thread</a> is how I found out.</p><hr /><p><strong>Warning: pci=assign-busses will rename any interfaces you have, please ensure you have console access to amend your network conneciton.</strong></p><hr /><p><img data-src="__GHOST_URL__/content/images/2021/07/grub.png" alt="" data-proofer-ignore>My Grub configuration with the changes highlighted in red. After adding this to my grub config file, I ran <code class="language-plaintext highlighter-rouge">update-grub</code>. My previous PCI pass through devices had changed identifiers so I made sure to update these also,</p><h3 id="enabling-the-vfio-modules"><span class="mr-2">Enabling the VFIO modules</span><a href="#enabling-the-vfio-modules" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>We need to add the VFIO modules which will allow us to use the VF’s as a stub so that they do not act as network interfaces on the host. This is a common technique to keep a PCI device free from the host in order to pass through to a guest machine.</p><p>Put <code class="language-plaintext highlighter-rouge">vfio</code>, <code class="language-plaintext highlighter-rouge">vfio_iommu_type1</code>, <code class="language-plaintext highlighter-rouge">vfio_pci</code> and <code class="language-plaintext highlighter-rouge">vfio_virqfd</code> into <code class="language-plaintext highlighter-rouge">/etc/modules</code> <img data-src="__GHOST_URL__/content/images/2021/07/modules.png" alt="" data-proofer-ignore>A preview of my modules After this, we can update our initramfs image with <code class="language-plaintext highlighter-rouge">update-initramfs -u -k all</code> and reboot the host with <code class="language-plaintext highlighter-rouge">shutdown -r now</code>.</p><hr /><h2 id="enabling-the-functions"><span class="mr-2">Enabling the functions</span><a href="#enabling-the-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Credit to Sandbo on the Proxmox Forum for a <a href="https://forum.proxmox.com/threads/enabling-sr-iov-for-intel-nic-x550-t2-on-proxmox-6.56677/">detailed guide</a> on this. These gave me the right pointers in order to enable it for my system.</p><p>To begin with, we will need to get the device name of our NIC. This can be found with the command <code class="language-plaintext highlighter-rouge">ls /sys/class/net</code> as it will list all available interfaces. Hopefully this is enough for you, but the command <code class="language-plaintext highlighter-rouge">ip address</code> or <code class="language-plaintext highlighter-rouge">ip link</code> may also help to indicate which NIC is what. For me, my i350 was under the name enp6s0f0. <img data-src="__GHOST_URL__/content/images/2021/07/enp6s0f0.png" alt="" data-proofer-ignore>My interface with the <code class="language-plaintext highlighter-rouge">ip link</code> command Now that we have our NIC interface, we can finally execute the following. Make sure to replace N with the amount of interfaces you want and <IF> with the interface name we found above.</IF></p><p><code class="language-plaintext highlighter-rouge">echo N &gt; /sys/class/net/&lt;IF&gt;/device/sriov_numvfs</code></p><p>In my case, the command is:</p><p><code class="language-plaintext highlighter-rouge">echo 6 &gt; /sys/class/net/enp6s0f0/device/sriov_numvfs</code></p><p>This command will hopefully succeed, creating as many virtual interfaces as you’d like. A great way to see these interfaces is by using the <code class="language-plaintext highlighter-rouge">ip link</code> comamnd: <img data-src="__GHOST_URL__/content/images/2021/07/iplinksriov.png" alt="" data-proofer-ignore>The output of ip link showing my VF’s. —</p><h2 id="making-the-functions-persistent"><span class="mr-2">Making the functions persistent</span><a href="#making-the-functions-persistent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://forum.proxmox.com/threads/enabling-sr-iov-for-intel-nic-x550-t2-on-proxmox-6.56677/">Sandbo made a perfect systemd daemon for this</a>. Credits to him.</p><p>Create the file <code class="language-plaintext highlighter-rouge">/etc/systemd/system/sriov.service</code> and input the following, amending to follow the previously used command:</p><p>[Unit]</p><p>Description=Script to enable SR-IOV on boot</p><p>[Service]</p><p>Type=oneshot</p><p>ExecStart=/usr/bin/bash -c ‘/usr/bin/echo N &gt; /sys/class/net//device/sriov_numvfs’</p><p>[Install]</p><p>WantedBy=multi-user.target</p><p><strong>If you intend to use pfSense with a virtual function, you will need to manually set the MAC address of one due to broken support in FreeBSD:</strong></p><p><code class="language-plaintext highlighter-rouge">ExecStart=/usr/bin/bash -c '/usr/bin/ip link set &lt;IF&gt; vf &lt;NUM&gt; mac 02:00:00:00:00:00'</code></p><p>This script will run while the server is starting up, alleviating the need for manual VF creation.</p><hr /><h2 id="passing-to-a-virtual-machine"><span class="mr-2">Passing to a Virtual Machine</span><a href="#passing-to-a-virtual-machine" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Now that our Virtual Functions have been stubbed and are working correctly, we can pass them through to our guest machines. These machines will more than likely have the driver already, however BSD guests may face issues. I found that OpenBSD did not support VF’s.</p><p>On the web interface for Proxmox, select a virtual machine on the sidebar and click on the hardware section. Next, click:</p><p><strong><code class="language-plaintext highlighter-rouge">Add &gt; PCI Device &gt; Virtual Function X</code></strong> <img data-src="__GHOST_URL__/content/images/2021/07/proxmox1.png" alt="" data-proofer-ignore>A list of PCI devices we can pass through. Select a Virtual Function You may notice on the side each VF has a different IOMMU group.  This can be a easy way to note down which guest uses what, or alternatively the PCI ID of the VF.</p><p>That’s all. It’s a relatively simple process, however getting here may have been a few headaches. In the future, all you need to do is just assign PCI devices!</p><hr /><h2 id="monitoring-the-interface"><span class="mr-2">Monitoring the interface</span><a href="#monitoring-the-interface" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="on-the-guest"><span class="mr-2">On the guest</span><a href="#on-the-guest" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Once you start the guest, it will more then likely have already configured itself and be online within your network. In my case, it has received an IP from DHCP: <img data-src="__GHOST_URL__/content/images/2021/07/rockysrv.png" alt="" data-proofer-ignore>The VF is represented by ens16 If we view information about the PCI device (your ID will be different): <img data-src="__GHOST_URL__/content/images/2021/07/lspcirocky.png" alt="" data-proofer-ignore>Information on the ethernet via passthrough We can see that it is detected and has a driver in use.</p><h3 id="on-the-host"><span class="mr-2">On the host</span><a href="#on-the-host" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If we view out interfaces with the <code class="language-plaintext highlighter-rouge">ip link</code> command, we can see that there has been a change in the VF MAC addresses: <img data-src="__GHOST_URL__/content/images/2021/07/sriovonhost.png" alt="" data-proofer-ignore>VF 3 has a random MAC address This shows us that the interface has been successfully configured for pass through as the driver as given it a valid MAC. However, this may not always be the case on UNIX derived guests and may need manually setting. This can be done with the following command:</p><p><code class="language-plaintext highlighter-rouge">ip link set &lt;interface&gt; vf &lt;number&gt; mac 02:00:00:00:00:00</code></p><p>We can also view the interface with commands such as <code class="language-plaintext highlighter-rouge">nload</code> or <code class="language-plaintext highlighter-rouge">iftop</code> by finding the interface name associated with the VF. In my case, this VF carried the name <code class="language-plaintext highlighter-rouge">fwln101i0</code> <img data-src="__GHOST_URL__/content/images/2021/07/nload.png" alt="" data-proofer-ignore>The interface on nload —</p><h2 id="pfsense-quirks"><span class="mr-2">pfSense quirks</span><a href="#pfsense-quirks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>pfSense can work lovely with Virtual Functions, however, as mentioned above BSD guests do not tend to treat these interfaces well. In my experience, they either do not assign MAC addresses automatically or they do not have the drivers at all.</p><p>To fix this, I amended the following to my systemd script:</p><p><code class="language-plaintext highlighter-rouge">ExecStart=/usr/bin/bash -c '/usr/bin/ip link set enp6s0f0 vf 0 mac 02:00:00:00:00:00'</code></p><p>This will assign the MAC address 02:00:00:00:00 to the first function on system boot. This function will then be passed through to my pfSense guest.</p><p>After this, the guest should recognise the function and work correctly. I have not met any unexpected issues by using this MAC address fix however I cannot guarantee the same for you. <img data-src="__GHOST_URL__/content/images/2021/07/pfsenseinterfaces.png" alt="" data-proofer-ignore>Shows up under the igb0 interface —</p><h2 id="final-thoughts"><span class="mr-2">Final Thoughts</span><a href="#final-thoughts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>As a consumer, this technology is not something which I can benefit from as much as someone from the enterprise may. None the less, exploring this route of Virtualization is opening doors for further projects. Youtuber <a href="https://www.youtube.com/channel/UCOWcZ6Wicl-1N34H0zZe38w">Level1Techs</a> has explained in great detail about how SR-IOV can open up single GPU virtualization for multiple guests which is exponentially more exciting.</p><p>If you have a chipset laying about which supports this technology, it’s worth a play around to grasp the potential of it.</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >Linux,</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >Networking,</a> <a href="/tags/virtualization/" class="post-tag no-text-decoration" >Virtualization</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=pfSense+Routing+with+SR-IOV+and+Proxmox+-+James+Ledger+Blog&url=https%3A%2F%2Fjamdoog.github.io%2Fposts%2Fpfsense-sriov%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=pfSense+Routing+with+SR-IOV+and+Proxmox+-+James+Ledger+Blog&u=https%3A%2F%2Fjamdoog.github.io%2Fposts%2Fpfsense-sriov%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjamdoog.github.io%2Fposts%2Fpfsense-sriov%2F&text=pfSense+Routing+with+SR-IOV+and+Proxmox+-+James+Ledger+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/configuring-freeipa-ldap-with-ansible-automation-platform-25/">Configuring FreeIPA LDAP with Ansible Automation Platform 2.5</a><li><a href="/posts/deploying-a-cdn-with-geodns/">Deploying a "CDN" with GeoDNS</a><li><a href="/posts/deploying-nginx-configuration-files-to-edge-nodes-with-gitlab-cd-docker/">Managing edge nodes with Docker and GitLab</a><li><a href="/posts/jtag-install/">JTAG Hacking a Xbox 360 in 2021</a><li><a href="/posts/securing-ssh-with-a-jump-host/">Securing SSH with a Jump Host and Wireguard</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">Linux,</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/ansible/">Ansible,</a> <a class="post-tag" href="/tags/container/">Container,</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/docker/">Docker,</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/free60/">free60</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/deploying-a-cdn-with-geodns/"><div class="card-body"> <em class="small" data-ts="1608076800" data-df="ll" > Dec 16, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deploying a "CDN" with GeoDNS</h3><div class="text-muted small"><p> Introduction When wondering how to pass the time I decided to optimise my website. I took initial steps such as minimising CSS and JS however incase you haven’t seen, my (old) base site actually i...</p></div></div></a></div><div class="card"> <a href="/posts/deploying-nginx-configuration-files-to-edge-nodes-with-gitlab-cd-docker/"><div class="card-body"> <em class="small" data-ts="1609286400" data-df="ll" > Dec 30, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Managing edge nodes with Docker and GitLab</h3><div class="text-muted small"><p> This post is a continuation of my previous post, “Deploying a ‘CDN’ with GeoDNS”. Reviewing this in 2023 - This is when I knew little about containers. Consider this a ‘test poc’ ;) One of the ma...</p></div></div></a></div><div class="card"> <a href="/posts/configuring-freeipa-ldap-with-ansible-automation-platform-25/"><div class="card-body"> <em class="small" data-ts="1735603200" data-df="ll" > Dec 31, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Configuring FreeIPA LDAP with Ansible Automation Platform 2.5</h3><div class="text-muted small"><p> Introduction This is a quick blog post to highlight integrating FreeIPA’s LDAP(S) into the recent Ansible Automation Platform 2.5. This also applies to RedHat’s Identity Management (IDM) which is...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/jtag-install/" class="btn btn-outline-primary" prompt="Older"><p>JTAG Hacking a Xbox 360 in 2021</p></a> <a href="/posts/securing-ssh-with-a-jump-host/" class="btn btn-outline-primary" prompt="Newer"><p>Securing SSH with a Jump Host and Wireguard</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/Jamdoog">James</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">Linux,</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/networking/">Networking</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/ansible/">Ansible,</a> <a class="post-tag" href="/tags/container/">Container,</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/docker/">Docker,</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/free60/">free60</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
